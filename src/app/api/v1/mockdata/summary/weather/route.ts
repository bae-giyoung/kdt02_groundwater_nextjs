import { NextResponse, NextRequest } from "next/server";

// /api/v1/rawdata/summary/weather?station=1


const mockData1 = {
  "data": {
    "series_raw": {
      "humidity_pct": [
        [202101, 72.706989247],
        [202102, 64.540178571],
        [202103, 68.75672043],
        [202104, 56.897222222],
        [202105, 69.267647058],
        [202106, 75.101671309],
        [202107, 79.816411682],
        [202108, 82.91902834],
        [202109, 78.858992805],
        [202110, 77.296383866],
        [202111, 79.915041782],
        [202112, 73.40776699],
        [202201, 62.409946236],
        [202202, 59.226993865],
        [202203, 65.986559139],
        [202204, 61.874826147],
        [202205, 57.414535666],
        [202206, 72.149856321],
        [202207, 79.38844086],
        [202208, 81.322102425],
        [202209, 72.876436781],
        [202210, 70.985215053],
        [202211, 70.7635605],
        [202212, 71.103494623],
        [202301, 68.911290322],
        [202302, 63.2414307],
        [202303, 55.376344086],
        [202304, 62.048611111],
        [202305, 69.696927374],
        [202306, 72.994397759],
        [202307, 82.990066225],
        [202308, 80.625336927],
        [202309, 80.326388888],
        [202310, 73.35309973],
        [202311, 73.09173913],
        [202312, 75.535367545]
      ],
      "rain_mm": [
        [202101, 33.2],
        [202102, 35.3],
        [202103, 87.3],
        [202104, 42.8],
        [202105, 60.3],
        [202106, 112.9],
        [202107, 204.4],
        [202108, 315.9],
        [202109, 98.2],
        [202110, 44.1],
        [202111, 73.8],
        [202112, 6],
        [202201, 0.7],
        [202202, 3.9],
        [202203, 73],
        [202204, 42.6],
        [202205, 1.6],
        [202206, 161.5],
        [202207, 158.2],
        [202208, 162.3],
        [202209, 70.4],
        [202210, 53.2],
        [202211, 54],
        [202212, 28.8],
        [202301, 26.4],
        [202302, 19.9],
        [202303, 45.5],
        [202304, 37.9],
        [202305, 172.6],
        [202306, 330.6],
        [202307, 321.3],
        [202308, 294.2],
        [202309, 107.1],
        [202310, 9.9],
        [202311, 83.5],
        [202312, 103.8]
      ],
      "temp_c": [
        [202101, -0.855510752],
        [202102, 3.127083333],
        [202103, 9.143413978],
        [202104, 13.709305555],
        [202105, 16.990882352],
        [202106, 22.356545961],
        [202107, 26.031015299],
        [202108, 25.103778677],
        [202109, 21.813956834],
        [202110, 14.761613351],
        [202111, 7.231197771],
        [202112, 1.366435506],
        [202201, -1.032392473],
        [202202, -0.794478527],
        [202203, 7.648521505],
        [202204, 13.697913769],
        [202205, 17.897308209],
        [202206, 22.991810344],
        [202207, 25.981451612],
        [202208, 25.573854447],
        [202209, 21.48275862],
        [202210, 13.666129032],
        [202211, 8.815299026],
        [202212, -1.949596774],
        [202301, -0.980241935],
        [202302, 1.868107302],
        [202303, 9.089112903],
        [202304, 13.152222222],
        [202305, 18.184776536],
        [202306, 22.933893557],
        [202307, 26.195860927],
        [202308, 27.115498652],
        [202309, 23.210416666],
        [202310, 14.485714285],
        [202311, 7.415942028],
        [202312, 2.781137309]
      ],
      "predicted": [
        [202101, 105.236509489],
        [202102, 105.164308482],
        [202103, 105.338362594],
        [202104, 105.472642083],
        [202105, 105.453453685],
        [202106, 105.589929122],
        [202107, 105.870079221],
        [202108, 105.836207786],
        [202109, 105.843267107],
        [202110, 105.737726286],
        [202111, 105.612797604],
        [202112, 105.493216629],
        [202201, 105.282829946],
        [202202, 105.149514447],
        [202203, 105.141668561],
        [202204, 105.2619905],
        [202205, 105.307012234],
        [202206, 105.495435114],
        [202207, 105.730171975],
        [202208, 105.90635221],
        [202209, 105.761147025],
        [202210, 105.571774865],
        [202211, 105.408790556],
        [202212, 105.298135967],
        [202301, 105.19987668],
        [202302, 105.148595722],
        [202303, 105.141423696],
        [202304, 105.218719583],
        [202305, 105.54047727],
        [202306, 105.739360069],
        [202307, 106.168659254],
        [202308, 105.996785491],
        [202309, 105.956283833],
        [202310, 105.647045417],
        [202311, 105.545991798],
        [202312, 105.523254396]
      ]
    }
  }
};

const mockData2 = {
  "data": {
    "series_raw": {
      "humidity_pct": [
        [202101, 72.706989247],
        [202102, 64.540178571],
        [202103, 68.75672043],
        [202104, 56.897222222],
        [202105, 69.267647058],
        [202106, 75.101671309],
        [202107, 79.816411682],
        [202108, 82.91902834],
        [202109, 78.858992805],
        [202110, 77.296383866],
        [202111, 79.915041782],
        [202112, 73.40776699],
        [202201, 62.409946236],
        [202202, 59.226993865],
        [202203, 65.986559139],
        [202204, 61.874826147],
        [202205, 57.414535666],
        [202206, 72.149856321],
        [202207, 79.38844086],
        [202208, 81.322102425],
        [202209, 72.876436781],
        [202210, 70.985215053],
        [202211, 70.7635605],
        [202212, 71.103494623],
        [202301, 68.911290322],
        [202302, 63.2414307],
        [202303, 55.376344086],
        [202304, 62.048611111],
        [202305, 69.696927374],
        [202306, 72.994397759],
        [202307, 82.990066225],
        [202308, 80.625336927],
        [202309, 80.326388888],
        [202310, 73.35309973],
        [202311, 73.09173913],
        [202312, 75.535367545]
      ],
      "rain_mm": [
        [202101, 33.2],
        [202102, 35.3],
        [202103, 87.3],
        [202104, 42.8],
        [202105, 60.3],
        [202106, 112.9],
        [202107, 204.4],
        [202108, 315.9],
        [202109, 98.2],
        [202110, 44.1],
        [202111, 73.8],
        [202112, 6],
        [202201, 0.7],
        [202202, 3.9],
        [202203, 73],
        [202204, 42.6],
        [202205, 1.6],
        [202206, 161.5],
        [202207, 158.2],
        [202208, 162.3],
        [202209, 70.4],
        [202210, 53.2],
        [202211, 54],
        [202212, 28.8],
        [202301, 26.4],
        [202302, 19.9],
        [202303, 45.5],
        [202304, 37.9],
        [202305, 172.6],
        [202306, 330.6],
        [202307, 321.3],
        [202308, 294.2],
        [202309, 107.1],
        [202310, 9.9],
        [202311, 83.5],
        [202312, 103.8]
      ],
      "temp_c": [
        [202101, -0.855510752],
        [202102, 3.127083333],
        [202103, 9.143413978],
        [202104, 13.709305555],
        [202105, 16.990882352],
        [202106, 22.356545961],
        [202107, 26.031015299],
        [202108, 25.103778677],
        [202109, 21.813956834],
        [202110, 14.761613351],
        [202111, 7.231197771],
        [202112, 1.366435506],
        [202201, -1.032392473],
        [202202, -0.794478527],
        [202203, 7.648521505],
        [202204, 13.697913769],
        [202205, 17.897308209],
        [202206, 22.991810344],
        [202207, 25.981451612],
        [202208, 25.573854447],
        [202209, 21.48275862],
        [202210, 13.666129032],
        [202211, 8.815299026],
        [202212, -1.949596774],
        [202301, -0.980241935],
        [202302, 1.868107302],
        [202303, 9.089112903],
        [202304, 13.152222222],
        [202305, 18.184776536],
        [202306, 22.933893557],
        [202307, 26.195860927],
        [202308, 27.115498652],
        [202309, 23.210416666],
        [202310, 14.485714285],
        [202311, 7.415942028],
        [202312, 2.781137309]
      ],
      "predicted": [
        [202101, 105.236509489],
        [202102, 105.164308482],
        [202103, 105.338362594],
        [202104, 105.472642083],
        [202105, 105.453453685],
        [202106, 105.589929122],
        [202107, 105.870079221],
        [202108, 105.836207786],
        [202109, 105.843267107],
        [202110, 105.737726286],
        [202111, 105.612797604],
        [202112, 105.493216629],
        [202201, 105.282829946],
        [202202, 105.149514447],
        [202203, 105.141668561],
        [202204, 105.2619905],
        [202205, 105.307012234],
        [202206, 105.495435114],
        [202207, 105.730171975],
        [202208, 105.90635221],
        [202209, 105.761147025],
        [202210, 105.571774865],
        [202211, 105.408790556],
        [202212, 105.298135967],
        [202301, 105.19987668],
        [202302, 105.148595722],
        [202303, 105.141423696],
        [202304, 105.218719583],
        [202305, 105.54047727],
        [202306, 105.739360069],
        [202307, 106.168659254],
        [202308, 105.996785491],
        [202309, 105.956283833],
        [202310, 105.647045417],
        [202311, 105.545991798],
        [202312, 105.523254396]
      ]
    }
  }
};

//?station=1
function getSearchParams(request: NextRequest) {
    const params = request.nextUrl.searchParams;
    const station = params.get("station") ?? "1";
    return { station }
}

export async function GET(
    request : NextRequest
) {
    const { station } = getSearchParams(request);

    const data = Number(station) % 2 == 0 ? mockData2 : mockData1;

    return NextResponse.json(data);
}