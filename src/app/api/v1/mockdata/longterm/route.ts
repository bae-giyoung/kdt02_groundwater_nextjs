import { NextResponse, NextRequest } from "next/server";

const mockData12 = "";
const mockData60 = "";
const mockData84 = "";
const mockData120 = `
{
  "data": {
    "series": {
      "actual": [
        [201401, 105.38868],
        [201402, 105.31695],
        [201403, 105.41004],
        [201404, 105.6016],
        [201405, 105.74569],
        [201406, 105.74792],
        [201407, 105.81925],
        [201408, 106.0223],
        [201409, 105.80185],
        [201410, 105.61882],
        [201411, 105.51841],
        [201412, 105.48288],
        [201501, 105.33076],
        [201502, 105.23201],
        [201503, 105.17657],
        [201504, 105.3202],
        [201505, 105.57864],
        [201506, 105.49252],
        [201507, 105.66385],
        [201508, 105.54523],
        [201509, 105.44588],
        [201510, 105.39526],
        [201511, 105.32209],
        [201512, 105.49625],
        [201601, 105.27482],
        [201602, 105.29292],
        [201603, 105.48841],
        [201604, 105.63147],
        [201605, 105.73892],
        [201606, 105.56624],
        [201607, 105.76462],
        [201608, 105.56754],
        [201609, 105.5835],
        [201610, 105.80515],
        [201611, 105.48923],
        [201612, 105.28669],
        [201701, 105.19246],
        [201702, 105.1311],
        [201703, 105.2293],
        [201704, 105.29518],
        [201705, 105.47501],
        [201706, 105.44446],
        [201707, 105.51642],
        [201708, 105.59299],
        [201709, 105.65585],
        [201710, 105.56147],
        [201711, 105.30192],
        [201712, 105.09125],
        [201801, 105.00968],
        [201802, 104.96103],
        [201803, 105.18583],
        [201804, 105.60954],
        [201805, 105.78808],
        [201806, 105.65994],
        [201807, 105.82388],
        [201808, 105.7069],
        [201809, 105.87241],
        [201810, 105.66621],
        [201811, 105.49014],
        [201812, 105.39567],
        [201901, 105.2444],
        [201902, 105.23697],
        [201903, 105.25297],
        [201904, 105.27976],
        [201905, 105.42476],
        [201906, 105.64831],
        [201907, 105.98032],
        [201908, 105.82737],
        [201909, 105.84476],
        [201910, 105.88409],
        [201911, 105.5055],
        [201912, 105.35293],
        [202001, 105.38638],
        [202002, 105.45201],
        [202003, 105.60321],
        [202004, 105.53454],
        [202005, 105.51044],
        [202006, 105.60853],
        [202007, 106.00057],
        [202008, 106.07935],
        [202009, 106.02872],
        [202010, 105.61086],
        [202011, 105.40546],
        [202012, 105.24543],
        [202101, 105.89418],
        [202102, 105.187],
        [202103, 105.34886],
        [202104, 105.47026],
        [202105, 105.45719],
        [202106, 105.58395],
        [202107, 105.84645],
        [202108, 105.79979],
        [202109, 105.81828],
        [202110, 105.71796],
        [202111, 105.60559],
        [202112, 105.50638],
        [202201, 105.30581],
        [202202, 105.18084],
        [202203, 105.17125],
        [202204, 105.26977],
        [202205, 105.31566],
        [202206, 105.48685],
        [202207, 105.70994],
        [202208, 105.87379],
        [202209, 105.72481],
        [202210, 105.52806],
        [202211, 105.34706],
        [202212, 105.21767],
        [202301, 105.18313],
        [202302, 105.13758],
        [202303, 105.14237],
        [202304, 105.22404],
        [202305, 105.53333],
        [202306, 105.72236],
        [202307, 106.16094],
        [202308, 105.96907],
        [202309, 105.9276],
        [202310, 105.62489],
        [202311, 105.52138],
        [202312, 105.55448]
      ],
      "predicted": [
        [202101, 105.89418],
        [202102, 105.187],
        [202103, 105.34886],
        [202104, 105.47026],
        [202105, 105.45719],
        [202106, 105.58395],
        [202107, 105.84645],
        [202108, 105.79979],
        [202109, 105.81828],
        [202110, 105.71796],
        [202111, 105.60559],
        [202112, 105.50638],
        [202201, 105.30581],
        [202202, 105.18084],
        [202203, 105.17125],
        [202204, 105.26977],
        [202205, 105.31566],
        [202206, 105.48685],
        [202207, 105.70994],
        [202208, 105.87379],
        [202209, 105.72481],
        [202210, 105.52806],
        [202211, 105.34706],
        [202212, 105.21767],
        [202301, 105.18313],
        [202302, 105.13758],
        [202303, 105.14237],
        [202304, 105.22404],
        [202305, 105.53333],
        [202306, 105.72236],
        [202307, 106.16094],
        [202308, 105.96907],
        [202309, 105.9276],
        [202310, 105.62489],
        [202311, 105.52138],
        [202312, 105.55448]
      ]
    }
  }
}
`;

//?station=1&timestep=monthly&horizons=120
function getSearchParams(request: NextRequest) {
    const params = request.nextUrl.searchParams;
    const station = params.get("station") ?? "1";
    const timestep = params.get("timestep") ?? "monthly";
    const horizons = params.get("horizons") ?? "120";
    return { station, timestep, horizons }
}

export async function GET(
    request : NextRequest
) {
    const { station, timestep, horizons } = getSearchParams(request);

    const data = JSON.parse(mockData120);

    return NextResponse.json(data);
}