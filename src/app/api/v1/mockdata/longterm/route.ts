import { NextResponse, NextRequest } from "next/server";

const mockData1 = `
{
  "data": {
    "series": {
      "actual": [
        [201401, 105.38868],
        [201402, 105.31695],
        [201403, 105.41004],
        [201404, 105.6016],
        [201405, 105.74569],
        [201406, 105.74792],
        [201407, 105.81925],
        [201408, 106.0223],
        [201409, 105.80185],
        [201410, 105.61882],
        [201411, 105.51841],
        [201412, 105.48288],
        [201501, 105.33076],
        [201502, 105.23201],
        [201503, 105.17657],
        [201504, 105.3202],
        [201505, 105.57864],
        [201506, 105.49252],
        [201507, 105.66385],
        [201508, 105.54523],
        [201509, 105.44588],
        [201510, 105.39526],
        [201511, 105.32209],
        [201512, 105.49625],
        [201601, 105.27482],
        [201602, 105.29292],
        [201603, 105.48841],
        [201604, 105.63147],
        [201605, 105.73892],
        [201606, 105.56624],
        [201607, 105.76462],
        [201608, 105.56754],
        [201609, 105.5835],
        [201610, 105.80515],
        [201611, 105.48923],
        [201612, 105.28669],
        [201701, 105.19246],
        [201702, 105.1311],
        [201703, 105.2293],
        [201704, 105.29518],
        [201705, 105.47501],
        [201706, 105.44446],
        [201707, 105.51642],
        [201708, 105.59299],
        [201709, 105.65585],
        [201710, 105.56147],
        [201711, 105.30192],
        [201712, 105.09125],
        [201801, 105.00968],
        [201802, 104.96103],
        [201803, 105.18583],
        [201804, 105.60954],
        [201805, 105.78808],
        [201806, 105.65994],
        [201807, 105.82388],
        [201808, 105.7069],
        [201809, 105.87241],
        [201810, 105.66621],
        [201811, 105.49014],
        [201812, 105.39567],
        [201901, 105.2444],
        [201902, 105.23697],
        [201903, 105.25297],
        [201904, 105.27976],
        [201905, 105.42476],
        [201906, 105.64831],
        [201907, 105.98032],
        [201908, 105.82737],
        [201909, 105.84476],
        [201910, 105.88409],
        [201911, 105.5055],
        [201912, 105.35293],
        [202001, 105.38638],
        [202002, 105.45201],
        [202003, 105.60321],
        [202004, 105.53454],
        [202005, 105.51044],
        [202006, 105.60853],
        [202007, 106.00057],
        [202008, 106.07935],
        [202009, 106.02872],
        [202010, 105.61086],
        [202011, 105.40546],
        [202012, 105.24543],
        [202101, 105.89418],
        [202102, 105.187],
        [202103, 105.34886],
        [202104, 105.47026],
        [202105, 105.45719],
        [202106, 105.58395],
        [202107, 105.84645],
        [202108, 105.79979],
        [202109, 105.81828],
        [202110, 105.71796],
        [202111, 105.60559],
        [202112, 105.50638],
        [202201, 105.30581],
        [202202, 105.18084],
        [202203, 105.17125],
        [202204, 105.26977],
        [202205, 105.31566],
        [202206, 105.48685],
        [202207, 105.70994],
        [202208, 105.87379],
        [202209, 105.72481],
        [202210, 105.52806],
        [202211, 105.34706],
        [202212, 105.21767],
        [202301, 105.18313],
        [202302, 105.13758],
        [202303, 105.14237],
        [202304, 105.22404],
        [202305, 105.53333],
        [202306, 105.72236],
        [202307, 106.16094],
        [202308, 105.96907],
        [202309, 105.9276],
        [202310, 105.62489],
        [202311, 105.52138],
        [202312, 105.55448]
      ],
      "predicted": [
        [202101, 105.79418],
        [202102, 105.087],
        [202103, 105.24886],
        [202104, 105.37026],
        [202105, 105.35719],
        [202106, 105.48395],
        [202107, 105.74645],
        [202108, 105.69979],
        [202109, 105.71828],
        [202110, 105.61796],
        [202111, 105.50559],
        [202112, 105.40638],
        [202201, 105.20581],
        [202202, 105.08084],
        [202203, 105.07125],
        [202204, 105.16977],
        [202205, 105.21566],
        [202206, 105.38685],
        [202207, 105.60994],
        [202208, 105.77379],
        [202209, 105.62481],
        [202210, 105.42806],
        [202211, 105.24706],
        [202212, 105.11767],
        [202301, 105.08313],
        [202302, 105.03758],
        [202303, 105.04237],
        [202304, 105.12404],
        [202305, 105.43333],
        [202306, 105.62236],
        [202307, 106.06094],
        [202308, 105.86907],
        [202309, 105.7276],
        [202310, 105.52489],
        [202311, 105.42138],
        [202312, 105.65448]
      ]
    }
  }
}
`;

const mockData2 = `
{
  "data": {
    "series": {
      "actual": [
        [201401, 104.38868],
        [201402, 104.31695],
        [201403, 104.41004],
        [201404, 104.6016],
        [201405, 104.74569],
        [201406, 104.74792],
        [201407, 104.81925],
        [201408, 104.5223],
        [201409, 104.80185],
        [201410, 104.61882],
        [201411, 104.51841],
        [201412, 104.48288],
        [201501, 104.33076],
        [201502, 104.23201],
        [201503, 104.17657],
        [201504, 104.3202],
        [201505, 104.57864],
        [201506, 104.49252],
        [201507, 104.66385],
        [201508, 104.54523],
        [201509, 104.44588],
        [201510, 104.39526],
        [201511, 104.32209],
        [201512, 104.49625],
        [201601, 104.27482],
        [201602, 104.29292],
        [201603, 104.48841],
        [201604, 104.63147],
        [201605, 104.73892],
        [201606, 104.56624],
        [201607, 104.76462],
        [201608, 104.56754],
        [201609, 104.5835],
        [201610, 104.80515],
        [201611, 104.48923],
        [201612, 104.28669],
        [201701, 104.19246],
        [201702, 104.1311],
        [201703, 104.2293],
        [201704, 104.29518],
        [201705, 104.47501],
        [201706, 104.44446],
        [201707, 104.51642],
        [201708, 104.59299],
        [201709, 104.65585],
        [201710, 104.56147],
        [201711, 104.30192],
        [201712, 104.29125],
        [201801, 104.40968],
        [201802, 104.56103],
        [201803, 104.67583],
        [201804, 104.60954],
        [201805, 104.78808],
        [201806, 104.80994],
        [201807, 104.82388],
        [201808, 104.7069],
        [201809, 104.87241],
        [201810, 104.66621],
        [201811, 104.49014],
        [201812, 104.39567],
        [201901, 104.2444],
        [201902, 104.23697],
        [201903, 104.25297],
        [201904, 104.27976],
        [201905, 104.42476],
        [201906, 104.64831],
        [201907, 104.98032],
        [201908, 104.82737],
        [201909, 104.84476],
        [201910, 104.88409],
        [201911, 104.5055],
        [201912, 104.35293],
        [202001, 104.38638],
        [202002, 104.45201],
        [202003, 104.60321],
        [202004, 104.53454],
        [202005, 104.51044],
        [202006, 104.60853],
        [202007, 105.00057],
        [202008, 105.07935],
        [202009, 105.02872],
        [202010, 104.61086],
        [202011, 104.40546],
        [202012, 104.24543],
        [202101, 104.89418],
        [202102, 104.187],
        [202103, 104.34886],
        [202104, 104.47026],
        [202105, 104.45719],
        [202106, 104.58395],
        [202107, 104.84645],
        [202108, 104.79979],
        [202109, 104.81828],
        [202110, 104.71796],
        [202111, 104.60559],
        [202112, 104.50638],
        [202201, 104.30581],
        [202202, 104.18084],
        [202203, 104.17125],
        [202204, 104.26977],
        [202205, 104.31566],
        [202206, 104.48685],
        [202207, 104.70994],
        [202208, 104.87379],
        [202209, 104.72481],
        [202210, 104.52806],
        [202211, 104.34706],
        [202212, 104.21767],
        [202301, 104.18313],
        [202302, 104.13758],
        [202303, 104.14237],
        [202304, 104.22404],
        [202305, 104.53333],
        [202306, 104.72236],
        [202307, 104.96094],
        [202308, 104.96907],
        [202309, 104.9276],
        [202310, 104.62489],
        [202311, 104.52138],
        [202312, 104.55448]
      ],
      "predicted": [
        [202101, 104.89418],
        [202102, 104.287],
        [202103, 104.14886],
        [202104, 104.37026],
        [202105, 104.25719],
        [202106, 104.38395],
        [202107, 104.64645],
        [202108, 104.59979],
        [202109, 104.61828],
        [202110, 104.51796],
        [202111, 104.50559],
        [202112, 104.40638],
        [202201, 104.20581],
        [202202, 104.08084],
        [202203, 104.07125],
        [202204, 104.16977],
        [202205, 104.21566],
        [202206, 104.38685],
        [202207, 104.60994],
        [202208, 104.77379],
        [202209, 104.62481],
        [202210, 104.42806],
        [202211, 104.24706],
        [202212, 104.11767],
        [202301, 104.08313],
        [202302, 104.03758],
        [202303, 104.04237],
        [202304, 104.12404],
        [202305, 104.43333],
        [202306, 104.52236],
        [202307, 104.76094],
        [202308, 104.86907],
        [202309, 104.8276],
        [202310, 104.62489],
        [202311, 104.42138],
        [202312, 104.45448]
      ]
    }
  }
}
`;

//?station=1&timestep=monthly&horizons=120
function getSearchParams(request: NextRequest) {
    const params = request.nextUrl.searchParams;
    const station = params.get("station") ?? "1";
    const timestep = params.get("timestep") ?? "monthly";
    const horizons = params.get("horizons") ?? "120";
    return { station, timestep, horizons }
}

export async function GET(
    request : NextRequest
) {
    const { station, timestep, horizons } = getSearchParams(request);

    const data = Number(station) % 2 == 0 ? JSON.parse(mockData2) : JSON.parse(mockData1);

    return NextResponse.json(data);
}